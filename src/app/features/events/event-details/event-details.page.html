<ng-container *ngIf="event$ | async as event">
  <app-page-header [pageTitle]="event.title" backRedirectionLink="/events"></app-page-header>
  <ion-content class="event-details-content">
    <ion-card class="activity-card">
      <ion-card-content>
        <ion-card-title class="title">{{ event.title }}</ion-card-title>
        <p class="description">{{ event.description }}</p>
        <div class="secondary-color">
          <div><ion-icon name="calendar-outline"></ion-icon> {{ event.date | date:'mediumDate' }} {{ event.date | date:'shortTime' }}</div>
          <div><ion-icon name="location-outline"></ion-icon> {{ event.location }}</div>
          <div><ion-icon name="people-outline"></ion-icon> {{ event.attendees }}/{{ event.maxAttendees }} participants</div>
          <div><ion-icon name="wallet-outline"></ion-icon> {{ event.eventCost }}</div>
          <div><ion-icon name="language-outline"></ion-icon> {{ event.language }}</div>
          <div><ion-icon name="person-outline"></ion-icon> {{ event.recommendedAgeGroup }}</div>
          <div class="rules-section">
            <h4>Event Rules:</h4>
            {{ event.rules }}
          </div>
          <div class="additional-info-section">
            <h4>Additional Information:</h4>
            <p>{{ event.additionalInfo }}</p>
          </div>
        </div>
        <div class="organizer-section">
          <p><strong>Organized by:</strong> {{ event.organizer.name }}</p>
          <ion-avatar>
            <img [src]="event.organizer.avatar" alt="Organizer's avatar">
          </ion-avatar>
        </div>
        <ion-button *ngIf="!isCurrentUserJoined" (click)="joinEvent(event.id)">Join</ion-button>
        <ion-button *ngIf="isCurrentUserJoined" color="danger" (click)="leaveEvent(event.id)">Leave</ion-button>
      </ion-card-content>
    </ion-card>

  </ion-content>
</ng-container>
