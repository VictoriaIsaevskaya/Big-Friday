"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3337],{3337:(oe,E,c)=>{c.r(E),c.d(E,{EventsPageModule:()=>W});var s=c(6814),a=c(6223),i=c(7311),x=c(2884),T=c(5861),f=c(9207),v=c(7140);const k={title:["",[a.kI.required,a.kI.maxLength(100)]],description:["",[a.kI.required,a.kI.maxLength(500)]],date:[null,a.kI.required],location:["",[a.kI.required,a.kI.maxLength(200)]],maxAttendees:["",[a.kI.required]],eventCost:[""],recommendedAgeGroup:[""],customAgeGroup:[""],language:[""],rules:[""],additionalInfo:[],chatName:[""],chatImage:[""]},F=[{controlName:"title",placeholder:"Event Title",icon:"create-outline",type:"input"},{controlName:"description",placeholder:"Event Description",icon:"document-text-outline",type:"textarea"},{controlName:"date",placeholder:"Event Date",icon:"calendar-number-outline",type:"datetime"},{controlName:"location",placeholder:"Location",icon:"location-outline",type:"input"},{controlName:"maxAttendees",placeholder:"Max Attendees",icon:"people-circle-outline",type:"input"},{controlName:"eventCost",placeholder:"Event Cost",icon:"cash-outline",type:"input"},{controlName:"language",placeholder:"Language",icon:"language-outline",type:"select",options:["English","Russian","French","Spanish","German","Polish","See additional info"],multiple:!0},{controlName:"recommendedAgeGroup",placeholder:"Recommended Age Group",icon:"people-outline",type:"select",options:["2+","4-6","7-9","10-13","14-17","18-25","26-35","36-45","46-55","56+","See additional info"]},{controlName:"rules",placeholder:"Rules",icon:"reader-outline",type:"textarea"},{controlName:"additionalInfo",placeholder:"Additional Info",icon:"information-circle-outline",type:"textarea"},{controlName:"chatName",placeholder:"Chat Name",icon:"chatbubbles-outline",type:"input"},{controlName:"chatImage",placeholder:"Chat Photo URL",icon:"image-outline",type:"input"}];var e=c(5879),h=c(4666),M=c(3926),P=c(2333),p=c(8857);const J=["input"];function Q(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"ion-input",13),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("placeholder",t.placeholder)("formControlName",t.controlName)}}function U(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"ion-textarea",13),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("placeholder",t.placeholder)("formControlName",t.controlName)}}function Y(n,o){1&n&&(e.ynx(0),e._UZ(1,"ion-datetime-button",14),e.BQk())}function O(n,o){if(1&n&&(e.TgZ(0,"ion-select-option",17),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function S(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-select",15),e.YNc(2,O,2,2,"ion-select-option",16),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("formControlName",t.controlName)("placeholder",t.placeholder)("multiple",t.multiple),e.xp6(1),e.Q6J("ngForOf",t.options)}}function L(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-item",10),e._UZ(2,"ion-icon",11),e.YNc(3,Q,2,2,"ng-container",12),e.YNc(4,U,2,2,"ng-container",12),e.YNc(5,Y,2,0,"ng-container",12),e.YNc(6,S,3,4,"ng-container",12),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(2),e.Q6J("name",t.icon),e.xp6(1),e.Q6J("ngIf","input"===t.type),e.xp6(1),e.Q6J("ngIf","textarea"===t.type),e.xp6(1),e.Q6J("ngIf","datetime"===t.type),e.xp6(1),e.Q6J("ngIf","select"===t.type)}}function w(n,o){1&n&&e._UZ(0,"ion-datetime",18)}let A=(()=>{class n{constructor(t,r,l,y,_,C){this.formBuilder=t,this.modalController=r,this.store=l,this.firestoreApiService=y,this.authService=_,this.router=C,this.formFieldsMap=F,this.eventForm=this.formBuilder.group(k)}createEvent(){this.eventForm.valid&&this.createLinkedEvent()}createLinkedEvent(){var t=this;return(0,T.Z)(function*(){const r=t.authService.getCurrentUserId(),{username:l,about:y,ageGroup:_,interests:C}=t.store.selectSnapshot(v.aF.userPreferences),N={...t.eventForm.value,organizer:{name:l,avatar:"assets/images/avatar.jpg",uid:r},category:t.category,participants:[{userId:r,username:l,about:y,ageGroup:_,interests:C}]},{chatName:I,chatImage:H,title:V}=t.eventForm.value,ee=I||V;let m=t.store.selectSnapshot(v.aF.userActivities).joinedEvents;const te=[{userId:r,unreadMessagesCount:0}],{id:g}=yield t.firestoreApiService.createEvent(N),ne={name:ee,image:H,participants:te},{id:u}=yield t.firestoreApiService.createChatForEvent(g,ne);yield t.firestoreApiService.linkEventWithChat(g,u),t.store.dispatch(new f.IA({event:N})),m?m.push({eventId:g,chatId:u}):m=[{eventId:g,chatId:u}],t.store.dispatch(new v.mm({userId:r,events:m})),yield t.router.navigate(["chats",u]),t.dismissModal()})()}dismissModal(){this.modalController.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(i.IN),e.Y36(h.yh),e.Y36(M.P),e.Y36(P.e),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-event"]],viewQuery:function(t,r){if(1&t&&e.Gf(J,5,i.pK),2&t){let l;e.iGM(l=e.CRH())&&(r.input=l.first)}},inputs:{category:"category"},standalone:!0,features:[e.jDz],decls:17,vars:7,consts:[[1,"form-content"],["no-border",""],["slot","start"],["fill","clear",3,"click"],["name","close-outline"],[1,"form-container"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["expand","block","type","submit",1,"single-btn","align-block-center",3,"disabled"],[3,"keepContentsMounted"],["lines","none",1,"form-item"],["slot","start","color","primary",3,"name"],[4,"ngIf"],[3,"placeholder","formControlName"],["datetime","datetime"],[3,"formControlName","placeholder","multiple"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","datetime","formControlName","date"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),e.NdJ("click",function(){return r.dismissModal()}),e._UZ(5,"ion-icon",4),e.qZA()(),e.TgZ(6,"ion-title"),e._uU(7),e.ALo(8,"titlecase"),e.qZA()()(),e.TgZ(9,"ion-content",5)(10,"form",6),e.NdJ("ngSubmit",function(){return r.createEvent()}),e.YNc(11,L,7,5,"ng-container",7),e.TgZ(12,"div")(13,"ion-button",8),e._uU(14,"Create"),e.qZA()(),e.TgZ(15,"ion-modal",9),e.YNc(16,w,1,0,"ng-template"),e.qZA()()()()),2&t&&(e.xp6(7),e.hij("Create ",e.lcZ(8,5,r.category)," Event"),e.xp6(3),e.Q6J("formGroup",r.eventForm),e.xp6(1),e.Q6J("ngForOf",r.formFieldsMap),e.xp6(2),e.Q6J("disabled",!r.eventForm.valid),e.xp6(2),e.Q6J("keepContentsMounted",!0))},dependencies:[s.ez,s.sg,s.O5,s.rS,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u,i.Pc,i.YG,i.Sm,i.W2,i.x4,i.Mj,i.Gu,i.gu,i.pK,i.Ie,i.t9,i.n0,i.g2,i.wd,i.sr,i.ki,i.QI,i.j9],styles:["[_ngcontent-%COMP%]:root{--ion-background-color: #e0e0e0;--ion-color-primary: #a17d63;--ion-text-color-primary: #4b2e36;--ion-text-color-secondary: #7d402e;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: ghostwhite;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}@media (prefers-color-scheme: dark){body[_ngcontent-%COMP%]{color-scheme:light}}.form-container[_ngcontent-%COMP%]{padding:20px}input[_ngcontent-%COMP%]{width:100%;border:none;background-color:transparent;font-size:inherit;outline:none;padding:0}.date-input[_ngcontent-%COMP%]{background-color:transparent;border-bottom:2px solid #888;width:50%;font-size:16px;position:relative;padding-left:10px}.date-time-input[_ngcontent-%COMP%]{margin-left:-15px}"],changeDetection:0}),n})();function G(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"ion-card",1),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.openEventDetails(l.event.id))}),e.TgZ(1,"ion-card-content")(2,"ion-card-title",2),e._uU(3),e.qZA(),e.TgZ(4,"p",3),e._uU(5),e.ALo(6,"slice"),e.qZA(),e.TgZ(7,"div",4)(8,"div"),e._UZ(9,"ion-icon",5),e._uU(10),e.ALo(11,"date"),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div"),e._UZ(14,"ion-icon",6),e._uU(15),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"ion-icon",7),e._uU(18),e.qZA()()()()}if(2&n){const t=e.oxw();let r;e.xp6(3),e.Oqu(t.event.title),e.xp6(2),e.hij("",e.Dn7(6,7,t.event.description,0,100),"..."),e.xp6(5),e.AsE(" ",e.xi3(11,11,t.event.date,"mediumDate")," ",e.xi3(12,14,t.event.date,"shortTime"),""),e.xp6(5),e.hij(" ",t.event.location,""),e.xp6(3),e.AsE(" ",null!==(r=t.event.attendees)&&void 0!==r?r:0,"/",t.event.maxAttendees," participants")}}let Z=(()=>{class n{constructor(t){this.router=t}openEventDetails(t){this.router.navigate(["event-details",t])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-event-card"]],inputs:{event:"event"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["class","activity-card",3,"click",4,"ngIf"],[1,"activity-card",3,"click"],[1,"title"],[1,"description"],[1,"secondary-color"],["name","calendar-outline"],["name","location-outline"],["name","people-outline"]],template:function(t,r){1&t&&e.YNc(0,G,19,17,"ion-card",0),2&t&&e.Q6J("ngIf",r.event)},dependencies:[s.ez,s.O5,s.OU,s.uU,i.Pc,i.PM,i.FN,i.Dq,i.gu]}),n})();var q=c(7582);const b={active:["bowling","hiking","clubing","soccer","volleyball"],passive:["Drinking","playing kids","barbecue"],leisure:["reading","painting","gardening","cooking"]};function D(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"app-event-card",8),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("event",t)}}function B(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,D,2,1,"ng-container",7),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.events$))}}function R(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,B,3,3,"div",5),e.qZA()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(8);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function j(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No events in this category yet"),e.qZA())}class d{constructor(o,t,r){if(this.route=o,this.modalController=t,this.store=r,this.activityType=this.route.snapshot.paramMap.get("activityType"),this.activityType){const l=decodeURIComponent(this.activityType);this.pageTitle=this.parseActivityType(l)}}ngOnInit(){this.store.dispatch(new f.fB({category:this.activityType}))}parseActivityType(o){return o.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}getActivityCategory(){if(this.activityType)for(const o in b)if(b[o].includes(this.activityType.toLowerCase()))return o;return"/events"}openCreateEventModal(){var o=this;return(0,T.Z)(function*(){return yield(yield o.modalController.create({component:A,componentProps:{category:o.activityType}})).present()})()}}d.\u0275fac=function(o){return new(o||d)(e.Y36(p.gz),e.Y36(i.IN),e.Y36(h.yh))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-events"]],decls:9,vars:7,consts:[[3,"fullscreen"],[3,"pageTitle","backRedirectionLink"],["slot","end"],[3,"click"],["slot","icon-only","name","add-outline"],[4,"ngIf","ngIfElse"],["noItems",""],[4,"ngFor","ngForOf"],[3,"event"]],template:function(o,t){if(1&o&&(e.TgZ(0,"ion-content",0)(1,"app-page-header",1)(2,"ion-buttons",2)(3,"ion-button",3),e.NdJ("click",function(){return t.openCreateEventModal()}),e._UZ(4,"ion-icon",4),e.qZA()()(),e.YNc(5,R,2,2,"div",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,j,2,0,"ng-template",null,6,e.W1O)),2&o){const r=e.MAs(8);e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("pageTitle",t.pageTitle)("backRedirectionLink",t.getActivityCategory()),e.xp6(4),e.Q6J("ngIf",e.lcZ(6,5,t.events$))("ngIfElse",r)}},dependencies:[s.sg,s.O5,i.YG,i.Sm,i.W2,i.gu,Z,x.q,s.Ov]}),(0,q.gn)([(0,h.Ph)(f.nF.categoryEvents)],d.prototype,"events$",void 0);const z=[{path:"",component:d}];let $=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(z),p.Bz]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.ez,a.u5,i.Pc,$,Z,A,x.q]}),n})()}}]);